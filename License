- name: Update README with deployment info
  run: |
    echo "Updating deployment info in README..."
    if [ -f README.md ]; then
      # Create a backup
      cp README.md README.md.backup
      
      # Current date
      CURRENT_DATE=$(date -u +"%Y-%m-%d %H:%M:%S UTC")
      REPO_OWNER="${{ github.repository_owner }}"
      REPO_NAME="${{ github.event.repository.name }}"
      
      # Check if deployment section exists
      if ! grep -q "## ðŸš€ Deployment Status" README.md; then
        cat >> README.md << EOF

## ðŸš€ Deployment Status

![GitHub Pages](https://github.com/${REPO_OWNER}/${REPO_NAME}/workflows/Deploy%20ESP32%20Smart%20Clock%20to%20GitHub%20Pages/badge.svg)
**Live Demo:** [https://${REPO_OWNER}.github.io/${REPO_NAME}/](https://${REPO_OWNER}.github.io/${REPO_NAME}/)

**Last Deployed:** ${CURRENT_DATE}

### ðŸ“± Access Methods:
1. **Web Interface:** Open the link above
2. **MQTT Broker:** \`broker.emqx.io:8084\`
3. **ESP32 IP:** Set in web interface

### ðŸ”§ Configuration Files:
- \`index.html\` - Main interface
- \`config.js\` - Configuration settings
- \`mqtt-client.js\` - MQTT communication
- \`CORS-proxy.html\` - Connection tester
EOF
      else
        # Update timestamp using sed with different delimiter
        sed -i "s|Last Deployed:.*|Last Deployed: ${CURRENT_DATE}|" README.md
      fi
    fi
